

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Lectura 3: Ejercicio en clase &#8212; Flujo en Redes 202302</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Class_2_Gurobi/3-Exercice_sol';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../SyllabusFlujoEnRedes.html">
  
  
  
  
  
    <p class="title logo__title">Flujo en Redes 202302</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../SyllabusFlujoEnRedes.html">
                    Syllabus
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Semana 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Class_1_Introduction_Motivation/1-Introduction.html"><strong>Lectura 1: Flujo en redes</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Class_1_Introduction_Motivation/2-Project.html"><strong>Lectura 2: Proyecto del semestre</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Class_1_Introduction_Motivation/3-Graphs.html"><strong>Lectura 3: Grafos</strong></a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/tabarespozos/Flujo_en_redes_202302/blob/Flujo_en_redes_202302/Class_2_Gurobi/3-Exercice_sol.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/tabarespozos/Flujo_en_redes_202302" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/tabarespozos/Flujo_en_redes_202302/issues/new?title=Issue%20on%20page%20%2FClass_2_Gurobi/3-Exercice_sol.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Class_2_Gurobi/3-Exercice_sol.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lectura 3: Ejercicio en clase</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><strong>Lectura 3: Ejercicio en clase</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#problema-de-asignacion-de-recursos-con-una-restriccion-presupuestaria">Problema de asignación de recursos con una restricción presupuestaria</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-variables">Decision variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#job-constraints">Job constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resource-constraints">Resource constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#budget-constraint">Budget constraint</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#objective-function">Objective function</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis">Analysis</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="lectura-3-ejercicio-en-clase">
<h1><strong>Lectura 3: Ejercicio en clase</strong><a class="headerlink" href="#lectura-3-ejercicio-en-clase" title="Permalink to this heading">#</a></h1>
</section>
<section id="problema-de-asignacion-de-recursos-con-una-restriccion-presupuestaria">
<h1>Problema de asignación de recursos con una restricción presupuestaria<a class="headerlink" href="#problema-de-asignacion-de-recursos-con-una-restriccion-presupuestaria" title="Permalink to this heading">#</a></h1>
<p>Supongamos ahora que existe un coste fijo <span class="math notranslate nohighlight">\(C_{r,j}\)</span> asociado a la asignación de un recurso <span class="math notranslate nohighlight">\(r \in R\)</span> a un trabajo <span class="math notranslate nohighlight">\(j \in J\)</span>. Supongamos también que existe un presupuesto limitado <span class="math notranslate nohighlight">\(B\)</span> que puede utilizarse para asignar trabajos.</p>
<p>El coste de asignar a Carlos, Joe o Mónika a cualquiera de los trabajos es de <span class="math notranslate nohighlight">\(\$1.000\)</span> , <span class="math notranslate nohighlight">\(\$2.000\)</span> y <span class="math notranslate nohighlight">\(\$3.000\)</span> respectivamente. El presupuesto disponible es de <span class="math notranslate nohighlight">\(\$5,000\)</span>.</p>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this heading">#</a></h2>
<p>The list <span class="math notranslate nohighlight">\(R\)</span> contains the names of the three resources: Carlos, Joe, and Monika.
The list <span class="math notranslate nohighlight">\(J\)</span> contains the names of the job positions: Tester, Java Developer, and Architect.</p>
<p>The Gurobi Python <code class="docutils literal notranslate"><span class="pre">multidict</span></code> function initialize two dictionaries:</p>
<ul class="simple">
<li><p>“scores” defines the matching scores for each resource and job combination.</p></li>
<li><p>“costs” defines the fixed cost associated of assigning a resource to a job.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Resource and job sets</span>
<span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Monika&#39;</span><span class="p">]</span>
<span class="n">J</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Tester&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">]</span>

<span class="c1"># Matching score data</span>
<span class="c1"># Cost is given in thousands of dollars</span>
<span class="n">combinations</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">costs</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">multidict</span><span class="p">({</span>
    <span class="p">(</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;Tester&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">53</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Tester&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">47</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">67</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Monika&#39;</span><span class="p">,</span> <span class="s1">&#39;Tester&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">53</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;Monika&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">73</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="p">(</span><span class="s1">&#39;Monika&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">47</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="p">})</span>

<span class="c1"># Available budget (thousands of dollars)</span>
<span class="n">budget</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">7</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">J</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Tester&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1"># Matching score data</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># Cost is given in thousands of dollars</span>
<span class="ne">----&gt; </span><span class="mi">7</span> <span class="n">combinations</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">costs</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">multidict</span><span class="p">({</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="p">(</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;Tester&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">53</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>     <span class="p">(</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>     <span class="p">(</span><span class="s1">&#39;Carlos&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Tester&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>     <span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">47</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>     <span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">67</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span>     <span class="p">(</span><span class="s1">&#39;Monika&#39;</span><span class="p">,</span> <span class="s1">&#39;Tester&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">53</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span>     <span class="p">(</span><span class="s1">&#39;Monika&#39;</span><span class="p">,</span> <span class="s1">&#39;JavaDeveloper&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">73</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span>     <span class="p">(</span><span class="s1">&#39;Monika&#39;</span><span class="p">,</span> <span class="s1">&#39;Architect&#39;</span><span class="p">):</span> <span class="p">[</span><span class="mi">47</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span> <span class="p">})</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span> <span class="c1"># Available budget (thousands of dollars)</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span> <span class="n">budget</span> <span class="o">=</span> <span class="mi">5</span>

<span class="ne">NameError</span>: name &#39;gp&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>The following constructor creates an empty <code class="docutils literal notranslate"><span class="pre">Model</span></code> object “m”. The <code class="docutils literal notranslate"><span class="pre">Model</span></code> object “m” holds a single optimization problem. It consists of a set of variables, a set of constraints, and the objective function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Declare and initialize model</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">gp</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="s1">&#39;RAP2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="decision-variables">
<h2>Decision variables<a class="headerlink" href="#decision-variables" title="Permalink to this heading">#</a></h2>
<p>The decision variable <span class="math notranslate nohighlight">\(x_{r,j}\)</span> is 1 if <span class="math notranslate nohighlight">\(r \in R\)</span> is assigned to job <span class="math notranslate nohighlight">\(j \in J\)</span>, and 0 otherwise.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Model.addVars()</span></code> method defines the decision variables for the model object “m”.</p>
<p>Because there is a budget constraint, it is possible that not all of the jobs will be filled. To account for this, we define a new decision variable that indicates whether or not a job is filled.</p>
<p>Let <span class="math notranslate nohighlight">\(g_{j}\)</span> be equal 1 if job <span class="math notranslate nohighlight">\(j \in J\)</span> is not filled, and 0 otherwise. This variable is a gap variable that indicates that a job cannot be filled.</p>
<p><em><strong>Remark:</strong></em> For the previous formulation of the RAP, we defined the assignment variables as non-negative and continuous which is the default value of the <code class="docutils literal notranslate"><span class="pre">vtype</span></code> argument of the <code class="docutils literal notranslate"><span class="pre">Model.addVars()</span></code> method.
However, in this extension of the RAP, because of the budget constraint we added to the model, we need to explicitly define these variables as binary. The <code class="docutils literal notranslate"><span class="pre">vtype=GRB.BINARY</span></code> argument of the <code class="docutils literal notranslate"><span class="pre">Model.addVars()</span></code> method defines the assignment variables as binary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create decision variables for the RAP model</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">combinations</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="n">GRB</span><span class="o">.</span><span class="n">BINARY</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;assign&quot;</span><span class="p">)</span>

<span class="c1"># Create gap variables for the RAP model</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addVars</span><span class="p">(</span><span class="n">J</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;gap&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="job-constraints">
<h2>Job constraints<a class="headerlink" href="#job-constraints" title="Permalink to this heading">#</a></h2>
<p>Since we have a limited budget to assign resources to jobs, it is possible that not all the jobs can be filled. For the job constraints, there are two possibilities either a resource is assigned to fill the job, or this job cannot be filled and we need to declare a gap. This latter possibility is captured by the decision variable <span class="math notranslate nohighlight">\(g_j\)</span>. Therefore, the job constraints are written as follows.</p>
<p>For each job <span class="math notranslate nohighlight">\(j \in J\)</span>, exactly one resource must be assigned to the job, or the corresponding <span class="math notranslate nohighlight">\(g_j\)</span> variable must be set to 1:</p>
<div class="math notranslate nohighlight">
\[
\sum_{r \: \in \: R} x_{r,\; j} + g_{j} = 1.
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create job constraints</span>
<span class="n">jobs</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addConstrs</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">+</span> <span class="n">g</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>  <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">J</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;job&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="resource-constraints">
<h2>Resource constraints<a class="headerlink" href="#resource-constraints" title="Permalink to this heading">#</a></h2>
<p>The constraints for the resources need to ensure that at most one job is assigned to each resource. That is, it is possible that not all the resources are assigned. Therefore, the resource constraints are written as follows.</p>
<p>For each resource <span class="math notranslate nohighlight">\(r \in R\)</span>, at most one job can be assigned to the resource:</p>
<div class="math notranslate nohighlight">
\[
\sum_{j \: \in \: J} x_{r,\; j} \leq 1.
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create resource constraints</span>
<span class="n">resources</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addConstrs</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="s1">&#39;*&#39;</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">R</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;resource&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="budget-constraint">
<h2>Budget constraint<a class="headerlink" href="#budget-constraint" title="Permalink to this heading">#</a></h2>
<p>This constraint ensures that the cost of assigning resources to fill job requirements do not exceed the budget available. The costs of assignment and budget are in thousands of dollars.</p>
<p>The cost of filling the Tester job is <span class="math notranslate nohighlight">\(1x_{1,1}\)</span>, if resource Carlos is assigned, or <span class="math notranslate nohighlight">\(2x_{2,1}\)</span>, if resource Joe is assigned, or <span class="math notranslate nohighlight">\(3x_{3,1}\)</span>, if resource Monika is assigned.
Consequently, the cost of filling the Tester job is as follows, where at most one term in this summation will be nonzero.</p>
<div class="math notranslate nohighlight">
\[
1x_{1,1} + 2x_{2,1} + 3x_{3,1}.
\]</div>
<p>Similarly, the cost of filling the Java Developer and Architect jobs are defined as follows. The cost of filling the Java Developer job is:</p>
<div class="math notranslate nohighlight">
\[
1x_{1, 2} + 2x_{2, 2} + 3x_{3, 2}.
\]</div>
<p>The cost of filling the Architect job is:</p>
<div class="math notranslate nohighlight">
\[
1x_{1, 3} + 2x_{2, 3} + 3x_{3, 3}.
\]</div>
<p>Hence, the total cost of filling the jobs should be less or equal than the budget available.</p>
<p>\begin{equation}
(1x_{1,1} + 2x_{2,1} + 3x_{3,1}) ; +
\end{equation}</p>
<p>\begin{equation}
(1x_{1, 2} + 2x_{2, 2} + 3x_{3, 2}) ; +
\end{equation}</p>
<p>\begin{equation}
(1x_{1, 3} + 2x_{2, 3} + 3x_{3, 3}) \leq 5
\end{equation}</p>
<p>Each term in parenthesis in the budget constraint can be expressed as follows.</p>
<p>\begin{equation}
(1x_{1,1} + 2x_{2,1} + 3x_{3,1}) = \sum_{r \in R} C_{r,1}x_{r,1}.
\end{equation}</p>
<p>\begin{equation}
(1x_{1, 2} + 2x_{2, 2} + 3x_{3, 2}) = \sum_{r \in R} C_{r,2}x_{r,2}.
\end{equation}</p>
<p>\begin{equation}
(1x_{1, 3} + 2x_{2, 3} + 3x_{3, 3}) = \sum_{r \in R} C_{r,3}x_{r,3}.
\end{equation}</p>
<p>Therefore, the budget constraint can be concisely written as:</p>
<p>\begin{equation}
\sum_{j \in J} \sum_{r \in R} C_{r,j}x_{r,j} \leq B.
\end{equation}</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Model.addConstr()</span></code> method of the Gurobi/Python API defines the budget constraint of the <code class="docutils literal notranslate"><span class="pre">Model</span></code> object “m”.
The first argument of this method, “x.prod(costs)”, is the prod method and defines the LHS of the budget constraint. The <span class="math notranslate nohighlight">\(&lt;=\)</span> defines a less or equal constraint, and the budget amount available is the RHS of the constraint.
This constraint is saying that the total cost of assigning resources to fill jobs requirements cannot exceed the budget available.
The second argument is the name of this constraint.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">budget</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addConstr</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">costs</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">budget</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;budget&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="objective-function">
<h1>Objective function<a class="headerlink" href="#objective-function" title="Permalink to this heading">#</a></h1>
<p>The objective function is similar to the RAP. The first term in the objective is the total matching score of the assignments. In this extension of the RAP, it is possible that not all jobs are filled; however, we want to heavily penalize this possibility. For this purpose, we have a second term in the objective function that takes the summation of the gap variables over all the jobs and multiply it by a big penalty <span class="math notranslate nohighlight">\(M\)</span>.</p>
<p>Observe that the maximum value of a matching score is 100, and the value that we give to <span class="math notranslate nohighlight">\(M\)</span> is 101. The rationale behind the value of <span class="math notranslate nohighlight">\(M\)</span> is that having gaps heavily deteriorates the total matching scores value.</p>
<p>Consequently, the objective function is to maximize the total matching score of the assignments minus the penalty associated of having gap variables with a value equal to 1.</p>
<div class="math notranslate nohighlight">
\[
\max \; \sum_{j \; \in \; J} \sum_{r \; \in \; R} s_{r,j}x_{r,j} -M \sum_{j \in J} g_{j}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Penalty for not filling a job position</span>
<span class="n">M</span> <span class="o">=</span> <span class="mi">101</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Objective: maximize total matching score of assignments</span>
<span class="c1"># Unfilled jobs are heavily penalized</span>
<span class="n">m</span><span class="o">.</span><span class="n">setObjective</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span> <span class="o">-</span> <span class="n">M</span><span class="o">*</span><span class="n">g</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">GRB</span><span class="o">.</span><span class="n">MAXIMIZE</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run optimization engine</span>
<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Root relaxation: objective 1.350000e+02, 4 iterations, 0.00 seconds

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  135.00000    0    2   52.00000  135.00000   160%     -    0s
     0     0  121.66667    0    7   52.00000  121.66667   134%     -    0s
     0     0     cutoff    0        52.00000   52.00000  0.00%     -    0s

Cutting planes:
  Gomory: 1
  GUB cover: 1
  RLT: 1

Explored 1 nodes (7 simplex iterations) in 0.02 seconds
Thread count was 8 (of 8 available processors)

Solution count 1: 52 

Optimal solution found (tolerance 1.00e-04)
Best objective 5.200000000000e+01, best bound 5.200000000000e+01, gap 0.0000%
</pre></div>
</div>
</div>
</div>
<p>The definition of the objective function includes the penalty of no filling jobs. However, we are interested in the optimal total matching score value when not all the jobs are filled. For this purpose, we need to compute the total matching score value using the matching score values <span class="math notranslate nohighlight">\(s_{r,j}\)</span> and the assignment decision variables <span class="math notranslate nohighlight">\(x_{r,j}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute total matching score from assignment variables</span>
<span class="n">total_matching_score</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">combinations</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mf">1e-6</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">varName</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">total_matching_score</span> <span class="o">+=</span> <span class="n">scores</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="n">r</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">x</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total matching score: &#39;</span><span class="p">,</span> <span class="n">total_matching_score</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>assign[Joe,Tester] 1.0
assign[Monika,JavaDeveloper] 1.0
Total matching score:  153.0
</pre></div>
</div>
</div>
</div>
<section id="analysis">
<h2>Analysis<a class="headerlink" href="#analysis" title="Permalink to this heading">#</a></h2>
<p>Recall that the budget is <span class="math notranslate nohighlight">\(\$5,000\)</span>, and the total  cost associated of allocating the three resources is <span class="math notranslate nohighlight">\(\$6,000\)</span>. This means that there is not enough budget to allocate the three resources we have. Consequently, the Gurobi Optimizer must choose two resources to fill the jobs demand, leave one job unfilled, and maximize the total matching scores. Notice that the two top matching scores are 80% (Joe for the Tester job) and 73% (Monika for the Java Developer job). Also, notice that the lowest score is 13% (Carlos for the Architect job). Assigning Joe to the Tester job, Monika to the Java Developer job, and nobody to the Architect job costs <span class="math notranslate nohighlight">\(\$5,000\)</span>  and yields a total matching score of 153. This is the optimal solution found by the Gurobi Optimizer.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Class_2_Gurobi"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><strong>Lectura 3: Ejercicio en clase</strong></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#problema-de-asignacion-de-recursos-con-una-restriccion-presupuestaria">Problema de asignación de recursos con una restricción presupuestaria</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-variables">Decision variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#job-constraints">Job constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resource-constraints">Resource constraints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#budget-constraint">Budget constraint</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#objective-function">Objective function</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis">Analysis</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alejandra Tabares
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>