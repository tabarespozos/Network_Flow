

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>A Data-Driven AMPL Model &#8212; Network Flow</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Class_2_Gurobi-AMPL/AMPL/3- Production-planning-advanced';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../SyllabusFlujoEnRedes.html">
  
  
  
  
  
    <p class="title logo__title">Network Flow</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../SyllabusFlujoEnRedes.html">
                    Syllabus
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Semana 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../Class_1_Introduction_Motivation/1-Introduction.html"><strong>Lectura 1: Flujo en redes</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Class_1_Introduction_Motivation/2-Project.html"><strong>Lectura 2: Proyecto del semestre</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Class_1_Introduction_Motivation/3-Graphs.html"><strong>Lectura 3: Grafos</strong></a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/tabarespozos/Network_Flow/blob/Network_Flow/Class_2_Gurobi-AMPL/AMPL/3- Production-planning-advanced.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/tabarespozos/Network_Flow" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/tabarespozos/Network_Flow/issues/new?title=Issue%20on%20page%20%2FClass_2_Gurobi-AMPL/AMPL/3- Production-planning-advanced.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/Class_2_Gurobi-AMPL/AMPL/3- Production-planning-advanced.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>A Data-Driven AMPL Model</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-representations">Data representations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modelo-matematico">Modelo matemático</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-modelo-de-produccion-en-ampl">El modelo de producción en AMPL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#los-datos-de-produccion-en-ampl">Los datos de producción en AMPL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resolviendo-el-problema-de-produccion">Resolviendo el problema de producción</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reportando-los-resultados">Reportando los resultados</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#para-expertos-en-python-creacion-de-subclases-de-ampl">Para expertos en Python: Creación de subclases de <code class="docutils literal notranslate"><span class="pre">AMPL</span></code></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="a-data-driven-ampl-model">
<h1>A Data-Driven AMPL Model<a class="headerlink" href="#a-data-driven-ampl-model" title="Permalink to this heading">#</a></h1>
<p>In this notebook, we’ll revisit the production planning example. However, this time we’ll demonstrate how Python’s data structures combine with AMPL’s ability to separate model and data, to create an optimization model that scales with the size of the data tables. This enables the model to adjust to new products, varying prices, or changing demand. We refer to this as “data-driven” modeling.</p>
<p>This notebook introduces two new AMPL model components that describe the data in a general way:</p>
<ul class="simple">
<li><p>Sets</p></li>
<li><p>Parameters</p></li>
</ul>
<p>These components enable the model to specify variables, constraints, and summations that are <em>indexed</em> over sets. The combination of sets and indices is essential to building scalable and maintainable models for more complex applications.</p>
<p>We will begin this analysis by examining the production planning data sets to identify the underlying problem structure. Then we will reformulate the mathematical model in a more general way that is valid for any data scenario. Finally we show how the same formulation carries over naturally into AMPL, providing a clear, data-driven formulation of the production planning application.</p>
<section id="data-representations">
<h2>Data representations<a class="headerlink" href="#data-representations" title="Permalink to this heading">#</a></h2>
<p>We begin by revisiting the data tables and mathematical model developed for the basic production planning problem presented in the previous notebook. The original data values were given as follows:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Product</p></th>
<th class="head text-center"><p>Material <br> required</p></th>
<th class="head text-center"><p>Labor A <br> required</p></th>
<th class="head text-center"><p>Labor B <br> required</p></th>
<th class="head text-center"><p>Market <br> Demand</p></th>
<th class="head text-center"><p>Price</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>U</p></td>
<td class="text-center"><p>10 g</p></td>
<td class="text-center"><p>1 hr</p></td>
<td class="text-center"><p>2 hr</p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(\leq\)</span> 40 units</p></td>
<td class="text-center"><p>$270</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>V</p></td>
<td class="text-center"><p>9 g</p></td>
<td class="text-center"><p>1 hr</p></td>
<td class="text-center"><p>1 hr</p></td>
<td class="text-center"><p>unlimited</p></td>
<td class="text-center"><p>$210</p></td>
</tr>
</tbody>
</table>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Resource</p></th>
<th class="head text-center"><p>Amount <br> Available</p></th>
<th class="head text-center"><p>Cost</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>M</p></td>
<td class="text-center"><p>unlimited</p></td>
<td class="text-center"><p>$10 / g</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>A</p></td>
<td class="text-center"><p>80 hours</p></td>
<td class="text-center"><p>$50 / hour</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>B</p></td>
<td class="text-center"><p>100 hours</p></td>
<td class="text-center"><p>$40 / hour</p></td>
</tr>
</tbody>
</table>
<p>Two distinct <em>sets</em> of objects are evident from these tables. The first is the set of products, comprising <span class="math notranslate nohighlight">\(U\)</span> and <span class="math notranslate nohighlight">\(V\)</span>. The second is the set of resources used to produce those products, comprising raw materials and two labor types, which we have abbreviated as <span class="math notranslate nohighlight">\(M\)</span>, <span class="math notranslate nohighlight">\(A\)</span>, and <span class="math notranslate nohighlight">\(B\)</span>.</p>
<p>Having identified these sets, the data for this application be factored into three simple tables. The first two tables list attributes of the products and attributes of the resources. The third table summarizes the processes used to create the products from the resources, which requires providing a value for each combination of product and resource:</p>
<p><strong>Table: Products</strong></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Product</p></th>
<th class="head text-center"><p>Demand</p></th>
<th class="head text-center"><p>Price</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>U</p></td>
<td class="text-center"><p><span class="math notranslate nohighlight">\(\leq\)</span> 40 units</p></td>
<td class="text-center"><p>$270</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>V</p></td>
<td class="text-center"><p>unlimited</p></td>
<td class="text-center"><p>$210</p></td>
</tr>
</tbody>
</table>
<p><strong>Table: Resources</strong></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Resource</p></th>
<th class="head text-center"><p>Available</p></th>
<th class="head text-center"><p>Cost</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>M</p></td>
<td class="text-center"><p>?</p></td>
<td class="text-center"><p>$10 / g</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>A</p></td>
<td class="text-center"><p>80 hours</p></td>
<td class="text-center"><p>$50 / hour</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>B</p></td>
<td class="text-center"><p>100 hours</p></td>
<td class="text-center"><p>$40 / hour</p></td>
</tr>
</tbody>
</table>
<p><strong>Table: Processes</strong></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Product</p></th>
<th class="head text-center"><p>M</p></th>
<th class="head text-center"><p>A</p></th>
<th class="head text-center"><p>B</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>U</p></td>
<td class="text-center"><p>10 g</p></td>
<td class="text-center"><p>1 hr</p></td>
<td class="text-center"><p>2 hr</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>V</p></td>
<td class="text-center"><p>9 g</p></td>
<td class="text-center"><p>1 hr</p></td>
<td class="text-center"><p>1 hr</p></td>
</tr>
</tbody>
</table>
<p>How does a Python-based AMPL application work with this data? We can think of the data as being handled in three steps:</p>
<ol class="arabic simple">
<li><p>Import the data into Python, in whatever form is convenient for the application.</p></li>
<li><p>Convert the data to the forms required by the optimization model.</p></li>
<li><p>Send the data to AMPL.</p></li>
</ol>
<p>For our example, we implement step 1 by use of Python <em>nested dictionaries</em> that closely resemble the above three tables:</p>
<ul class="simple">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">products</span></code> data structure, the product abbreviations serve as keys for outermost dictionary, and the product-related attribute names (<code class="docutils literal notranslate"><span class="pre">demand</span></code> and <code class="docutils literal notranslate"><span class="pre">price</span></code>) as keys for the inner dictionaries.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">resources</span></code> data structure, the resource abbreviations serve as keys for outermost dictionary, and the resource-related attribute names (<code class="docutils literal notranslate"><span class="pre">available</span></code> and <code class="docutils literal notranslate"><span class="pre">cost</span></code>) as keys for the inner dictionaries.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">processes</span></code> data structure, there is a value corresponding to each combination of a product and a resource; the product abbreviations serve as keys for outermost dictionary, and resource abbreviations as keys for the inner dictionaries.</p></li>
</ul>
<p>Where demand or availability is “unlimited”, we use an expression that Python interprets as an infinite value.</p>
<p>You will see a variety of data representation in this book, chosen in each case to be most efficient and convenient for the application at hand. Some will use Python packages, particularly <em>numpy</em> and <em>pandas</em>, that are designed for large-scale data handling.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Inf</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>

<span class="n">products</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;U&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;demand&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">270</span><span class="p">},</span>
    <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;demand&quot;</span><span class="p">:</span> <span class="n">Inf</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">210</span><span class="p">},</span>
<span class="p">}</span>

<span class="n">resources</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;available&quot;</span><span class="p">:</span> <span class="n">Inf</span><span class="p">,</span> <span class="s2">&quot;cost&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;available&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s2">&quot;cost&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;available&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;cost&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span>
<span class="p">}</span>

<span class="n">processes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;U&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
    <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="modelo-matematico">
<h2>Modelo matemático<a class="headerlink" href="#modelo-matematico" title="Permalink to this heading">#</a></h2>
<p>Una vez que los datos del problema se reorganizan en tablas como estas, la estructura del problema de planificación de la producción se vuelve evidente. Junto con los dos conjuntos, tenemos una variedad de <em>parámetros</em> simbólicos que especifican los costos, límites y procesos del modelo de manera general. En comparación con el cuaderno anterior, estas abstracciones nos permiten crear modelos matemáticos que pueden adaptarse y escalar con los datos suministrados.</p>
<p>Sean <span class="math notranslate nohighlight">\(\cal{P}\)</span> y <span class="math notranslate nohighlight">\(\cal{R}\)</span> el conjunto de productos y recursos, respectivamente, y sean <span class="math notranslate nohighlight">\(p\)</span> y <span class="math notranslate nohighlight">\(r\)</span> elementos representativos de esos conjuntos. Usamos variables de decisión indexadas <span class="math notranslate nohighlight">\(x_r\)</span> para denotar la cantidad de recurso <span class="math notranslate nohighlight">\(r\)</span> que se consume en la producción, y <span class="math notranslate nohighlight">\(y_p\)</span> para denotar la cantidad de producto <span class="math notranslate nohighlight">\(p\)</span> producido.</p>
<p>El modelo especifica límites inferiores y superiores para los valores de las variables. Representamos estos límites como:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
    0 \leq x_r \leq b^x_r &amp; &amp; \forall r\in\cal{R} \\
    0 \leq y_p \leq b^y_p &amp; &amp; \forall p\in\cal{P} \\
\end{aligned}
\end{split}\]</div>
<p>donde los límites superiores, (b^x_r) y (b^y_p), son datos tomados de las tablas de atributos.</p>
<p>La función objetivo es dada por:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
    \text{profit} &amp; = \text{revenue} - \text{cost} \\
\end{aligned}
\end{split}\]</div>
<p>pero ahora las expresiones para ingresos y costos se expresan de manera más general como sumas sobre los conjuntos de productos y recursos,</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{aligned}
    \text{revenue} &amp; = \sum_{p\in\cal{P}} c^y_p y_p  \\
    \text{cost} &amp; = \sum_{r\in\cal{R}} c^x_r x_r \\
\end{aligned}
\end{split}\]</div>
<p>donde los parámetros (c^y_p) y (c^x_r) representan los precios de venta de los productos y los costos de los recursos, respectivamente. Los límites en los recursos disponibles se pueden escribir como</p>
<div class="math notranslate nohighlight">
\[
\begin{aligned}
    \sum_{p\in\cal{P}} a_{rp} y_p &amp; \leq x_r &amp; \forall r\in\cal{R}
\end{aligned}
\]</div>
<p>donde (a_{rp}) es la cantidad de recurso (r) necesaria para producir 1 unidad del producto (p). Juntando estas piezas, tenemos el siguiente modelo simbólico para el problema de planificación de la producción.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align}
{\rm maximize} \quad &amp; \sum_{p\in\cal{P}} c^y_p y_p - \sum_{r\in\cal{R}} c^x_r x_r \\
\text{subject to} \quad &amp; \sum_{p\in\cal{P}} a_{rp} y_p  \leq x_r &amp; \forall r\in\cal{R} \nonumber \\
 &amp;   0 \leq x_r \leq b^x_r &amp; \forall r\in\cal{R} \nonumber  \\
 &amp;   0 \leq y_p \leq b^y_p &amp; \forall p\in\cal{P} \nonumber  \\
\end{align}
\end{split}\]</div>
<p>Cuando se formula de esta manera, el modelo puede aplicarse a cualquier problema con la misma estructura, independientemente del número de productos o recursos. Esta flexibilidad es posible gracias al uso de conjuntos para describir los productos y recursos de una instancia particular del problema, índices como (p) y (r) para referirse a elementos de esos conjuntos, y tablas de datos que contienen los valores de los parámetros relevantes.</p>
<p>Generalizar los modelos matemáticos de esta manera es una característica de todas las aplicaciones de optimización a gran escala. A continuación, veremos cómo este tipo de generalización se traslada de forma natural a la formulación y resolución del modelo en AMPL.</p>
</section>
<section id="el-modelo-de-produccion-en-ampl">
<h2>El modelo de producción en AMPL<a class="headerlink" href="#el-modelo-de-produccion-en-ampl" title="Permalink to this heading">#</a></h2>
<p>Como antes, comenzamos la construcción de un modelo en AMPL importando los componentes necesarios en el entorno de AMPL.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">amplpy</span> <span class="kn">import</span> <span class="n">AMPL</span><span class="p">,</span> <span class="n">ampl_notebook</span>

<span class="n">ampl</span> <span class="o">=</span> <span class="n">ampl_notebook</span><span class="p">(</span>
    <span class="n">modules</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;highs&quot;</span><span class="p">],</span>  <span class="c1"># modules to install</span>
    <span class="n">license_uuid</span><span class="o">=</span><span class="s2">&quot;cf36ebc4-be04-47f5-9536-c60cc47c7341&quot;</span><span class="p">,</span>  <span class="c1"># license to use</span>
<span class="p">)</span>  <span class="c1"># instantiate AMPL object and register magics</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Licensed to Bundle #6719.7170 expiring 20241231: Network Flow and Transportation Analytics, Prof. Alejandra Tabares, Universidad de los Andes - Colombia.
</pre></div>
</div>
</div>
</div>
<p>A continuación, utilizamos las declaraciones <code class="docutils literal notranslate"><span class="pre">set</span></code> de AMPL para definir los conjuntos de productos y recursos. Es importante notar que, en este punto, solo estamos informando a AMPL sobre los dos conjuntos que se utilizarán en el modelo. Los miembros de estos conjuntos se enviarán desde Python a AMPL más adelante, como parte de los datos del problema.</p>
<p>En las formulaciones matemáticas, es habitual mantener los nombres de todos los componentes cortos. Pero al escribir el modelo en AMPL, somos libres de usar nombres más largos y significativos que hagan que las declaraciones del modelo sean más fáciles de leer. Así, por ejemplo, aquí usamos <code class="docutils literal notranslate"><span class="pre">PRODUCTS</span></code> y <code class="docutils literal notranslate"><span class="pre">RESOURCES</span></code> como los nombres de los conjuntos en AMPL que se llaman <span class="math notranslate nohighlight">\(\cal P\)</span> y <span class="math notranslate nohighlight">\(\cal R\)</span> en el modelo matemático.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">ampl_eval</span>
# define sets

set PRODUCTS;
set RESOURCES;
</pre></div>
</div>
</div>
</div>
<p>El siguiente paso es introducir los parámetros que se usarán como datos en la función objetivo y las restricciones.</p>
<p>Una declaración que define un parámetro en AMPL comienza con la palabra clave <code class="docutils literal notranslate"><span class="pre">param</span></code> y un nombre único. Luego, entre llaves <code class="docutils literal notranslate"><span class="pre">{</span></code> y <code class="docutils literal notranslate"><span class="pre">}</span></code> especifica los conjuntos de índices para el parámetro. Por ejemplo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">param</span> <span class="pre">demand</span> <span class="pre">{PRODUCTS}</span> <span class="pre">&gt;=</span> <span class="pre">0;</span></code> indica que hay un valor de “demanda de producto” para cada miembro del conjunto <code class="docutils literal notranslate"><span class="pre">PRODUCTS</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">param</span> <span class="pre">need</span> <span class="pre">{RESOURCES,PRODUCTS}</span> <span class="pre">&gt;=</span> <span class="pre">0;</span></code> indica que hay un valor de “recurso necesario” para cada combinación de un recurso y un producto.</p></li>
</ul>
<p>Al final de cada declaración <code class="docutils literal notranslate"><span class="pre">param</span></code>, especificamos que los valores del parámetro deben ser no negativos o positivos, según corresponda. Estas especificaciones se usarán más adelante para verificar que los valores de los datos reales sean apropiados para el problema.</p>
<p>Hay 5 declaraciones <code class="docutils literal notranslate"><span class="pre">param</span></code> diferentes en total, correspondientes a los 5 tipos diferentes de datos en las tablas y los 5 parámetros simbólicos <span class="math notranslate nohighlight">\(b_p^y\)</span>, <span class="math notranslate nohighlight">\(c_p^y\)</span>, <span class="math notranslate nohighlight">\(b_r^x\)</span>, <span class="math notranslate nohighlight">\(c_r^x\)</span>, y <span class="math notranslate nohighlight">\(a_{rp}\)</span> en el modelo matemático.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">ampl_eval</span>
# define parameters

param demand {PRODUCTS} &gt;= 0;
param price {PRODUCTS} &gt; 0;

param available {RESOURCES} &gt;= 0;
param cost {RESOURCES} &gt; 0;

param need {RESOURCES,PRODUCTS} &gt;= 0;
</pre></div>
</div>
</div>
</div>
<p>AMPL define las variables de decisión de manera muy similar a los parámetros, pero utilizando <code class="docutils literal notranslate"><span class="pre">var</span></code> como palabra clave para iniciar la declaración. Nombramos las variables <code class="docutils literal notranslate"><span class="pre">Use</span></code> para el uso de recursos y <code class="docutils literal notranslate"><span class="pre">Sell</span></code> para las ventas de productos.</p>
<p>Para expresar los límites de las variables de la misma manera que la formulación matemática, se necesita una forma más general de la declaración de AMPL. En el caso de las variables <code class="docutils literal notranslate"><span class="pre">Use</span></code>, por ejemplo:</p>
<ul class="simple">
<li><p>La expresión de indexación se escribe <code class="docutils literal notranslate"><span class="pre">{r</span> <span class="pre">in</span> <span class="pre">RESOURCES}</span></code> para indicar que hay una variable para cada miembro del conjunto de recursos, y también para asociar el <em>índice</em> <code class="docutils literal notranslate"><span class="pre">r</span></code> con los miembros del conjunto para el propósito de esta declaración. Esto es el equivalente en AMPL de <span class="math notranslate nohighlight">\(\forall r\in\cal{R}\)</span> en la declaración matemática.</p></li>
<li><p>El límite superior se escribe <code class="docutils literal notranslate"><span class="pre">&lt;=</span> <span class="pre">available[r]</span></code> para indicar que para cada miembro <code class="docutils literal notranslate"><span class="pre">r</span></code> del conjunto de recursos, el límite superior de la variable está dado por el valor correspondiente de la tabla de disponibilidad. Esto es el equivalente en AMPL de <span class="math notranslate nohighlight">\(\leq b^x_r\)</span> en la declaración matemática.</p></li>
</ul>
<p>Una expresión entre corchetes <code class="docutils literal notranslate"><span class="pre">[...]</span></code> se llama un <em>subíndice</em> en AMPL porque juega el mismo papel que un subíndice matemático como <span class="math notranslate nohighlight">\(r\)</span> en <span class="math notranslate nohighlight">\(\leq b^x_r\)</span>. En cualquier lugar donde el modelo se refiere a valores particulares de un parámetro o variable indexados, verás expresiones de subíndice. Por ejemplo,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">need[r,p]</span></code> será la cantidad de recurso <code class="docutils literal notranslate"><span class="pre">r</span></code> necesaria para producir una unidad del producto <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Use[r]</span></code> será la cantidad total de recurso <code class="docutils literal notranslate"><span class="pre">r</span></code> utilizada.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">ampl_eval</span>
# define variables

var Use {r in RESOURCES} &gt;= 0, &lt;= available[r];
var Sell {p in PRODUCTS} &gt;= 0, &lt;= demand[p];
</pre></div>
</div>
</div>
</div>
<p>Al igual que en el cuaderno anterior, la declaración de AMPL para la función objetivo comienza con <code class="docutils literal notranslate"><span class="pre">maximize</span> <span class="pre">Profit</span></code>. Pero ahora, como en la formulación matemática, AMPL utiliza expresiones de sumación general:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sum</span> <span class="pre">{p</span> <span class="pre">in</span> <span class="pre">PRODUCTS}</span> <span class="pre">price[p]</span> <span class="pre">*</span> <span class="pre">Sell[p]</span></code> es la suma, sobre todos los productos, del precio por unidad multiplicado por el número vendido. Esto corresponde a <span class="math notranslate nohighlight">\(\sum_{p\in\cal{P}} c^y_p y_p\)</span> en la formulación matemática.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum</span> <span class="pre">{r</span> <span class="pre">in</span> <span class="pre">RESOURCES}</span> <span class="pre">cost[r]</span> <span class="pre">*</span> <span class="pre">Use[r]</span></code> es la suma, sobre todos los recursos, del costo por unidad multiplicado por la cantidad utilizada. Esto corresponde a <span class="math notranslate nohighlight">\(\sum_{r\in\cal{R}} c^x_r x_r\)</span> en la formulación matemática.</p></li>
</ul>
<p>La expresión completa para la función objetivo es simplemente la primera de estas expresiones menos la segunda.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">ampl_eval</span>
# define objective function

maximize Profit:
   sum {p in PRODUCTS} price[p] * Sell[p] -
   sum {r in RESOURCES} cost[r] * Use[r];
</pre></div>
</div>
</div>
</div>
<p>El modelo de AMPL anterior tenía 3 restricciones, cada una definida por una declaración <code class="docutils literal notranslate"><span class="pre">subject</span> <span class="pre">to</span></code>. Pero la formulación matemática basada en datos reconoce que solo hay un tipo diferente de restricción: los recursos necesarios deben ser menores o iguales a los recursos utilizados, repetida 3 veces, una vez para cada recurso. La versión de AMPL combina expresiones que ya han aparecido en partes anteriores del modelo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">subject</span> <span class="pre">to</span> <span class="pre">ResourceLimit</span> <span class="pre">{r</span> <span class="pre">in</span> <span class="pre">RESOURCES}</span></code> indica que el modelo tendrá una restricción correspondiente a cada miembro <code class="docutils literal notranslate"><span class="pre">r</span></code> del conjunto de recursos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum</span> <span class="pre">{p</span> <span class="pre">in</span> <span class="pre">PRODUCTS}</span> <span class="pre">need[r,p]</span> <span class="pre">*</span> <span class="pre">Sell[p]</span> <span class="pre">&lt;=</span> <span class="pre">Use[r]</span></code> indica que el total del recurso <code class="docutils literal notranslate"><span class="pre">r</span></code> necesario, sumado sobre todos los productos vendidos, debe ser <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> el total del recurso <code class="docutils literal notranslate"><span class="pre">r</span></code> utilizado. Esto corresponde a <span class="math notranslate nohighlight">\(\sum_{p\in\cal{P}} a_{rp} y_p \leq x_r\)</span> en la formulación matemática.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">ampl_eval</span>
# create indexed constraint

subject to ResourceLimit {r in RESOURCES}:
   sum {p in PRODUCTS} need[r,p] * Sell[p] &lt;= Use[r];
</pre></div>
</div>
</div>
</div>
</section>
<section id="los-datos-de-produccion-en-ampl">
<h2>Los datos de producción en AMPL<a class="headerlink" href="#los-datos-de-produccion-en-ampl" title="Permalink to this heading">#</a></h2>
<p>Ahora que el modelo de AMPL está definido, podemos llevar a cabo el paso 2 de manejo de datos, que es convertir los datos a las formas que el modelo requiere:</p>
<ul class="simple">
<li><p>Para los dos conjuntos, listas de Python de los miembros del conjunto.</p></li>
<li><p>Para los dos parámetros indexados sobre productos, diccionarios de Python cuyas claves son los nombres de los productos.</p></li>
<li><p>Para los dos parámetros indexados sobre recursos, diccionarios de Python cuyas claves son los nombres de los recursos.</p></li>
<li><p>Para el parámetro indexado sobre pares recurso-producto, un diccionario de Python cuyas claves son tuplas que consisten en un recurso y un producto.</p></li>
</ul>
<p>Utilizando las poderosas formas de expresión de Python, todas estas listas y diccionarios se extraen fácilmente de los diccionarios anidados que nuestra aplicación configuró en el paso 1. Para evitar tener demasiados nombres diferentes, asignamos cada lista y diccionario a una variable de programa de Python que tiene el mismo nombre que el conjunto o parámetro correspondiente en AMPL:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set data</span>
<span class="n">PRODUCTS</span> <span class="o">=</span> <span class="n">products</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">RESOURCES</span> <span class="o">=</span> <span class="n">resources</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># product data</span>
<span class="n">demand</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;demand&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">products</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="n">price</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">products</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<span class="c1"># resource data</span>
<span class="n">available</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;available&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resources</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="n">cost</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;cost&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resources</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<span class="n">need</span> <span class="o">=</span> <span class="p">{(</span><span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span> <span class="n">value</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processes</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">processes</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">PRODUCTS</span><span class="p">,</span> <span class="n">RESOURCES</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">demand</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">available</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">need</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;U&#39;, &#39;V&#39;]) dict_keys([&#39;M&#39;, &#39;A&#39;, &#39;B&#39;])
{&#39;U&#39;: 40, &#39;V&#39;: inf} {&#39;U&#39;: 270, &#39;V&#39;: 210}
{&#39;M&#39;: inf, &#39;A&#39;: 80, &#39;B&#39;: 100} {&#39;M&#39;: 10, &#39;A&#39;: 50, &#39;B&#39;: 40}
{(&#39;M&#39;, &#39;U&#39;): 10, (&#39;A&#39;, &#39;U&#39;): 2, (&#39;B&#39;, &#39;U&#39;): 1, (&#39;M&#39;, &#39;V&#39;): 9, (&#39;A&#39;, &#39;V&#39;): 1, (&#39;B&#39;, &#39;V&#39;): 1}
</pre></div>
</div>
</div>
</div>
</section>
<section id="resolviendo-el-problema-de-produccion">
<h2>Resolviendo el problema de producción<a class="headerlink" href="#resolviendo-el-problema-de-produccion" title="Permalink to this heading">#</a></h2>
<p>Ahora los datos de Python pueden ser enviados a AMPL, y AMPL puede invocar un solver. Para este modelo simple, podemos hacer que los datos de Python correspondan exactamente a los datos de AMPL, por lo que las sentencias para enviar los datos a AMPL son particularmente fáciles de escribir.</p>
<p>Las sentencias para seleccionar un solver e iniciar el proceso del solver son las mismas que usamos con el ejemplo básico de planificación de la producción. Cuando el solver termina, muestra algunas líneas de salida para confirmar que se ha encontrado una solución.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load set data</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">set</span><span class="p">[</span><span class="s2">&quot;PRODUCTS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PRODUCTS</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">set</span><span class="p">[</span><span class="s2">&quot;RESOURCES&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">RESOURCES</span>

<span class="c1"># load parameter data</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">param</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">param</span><span class="p">[</span><span class="s2">&quot;demand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">demand</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">param</span><span class="p">[</span><span class="s2">&quot;cost&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cost</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">param</span><span class="p">[</span><span class="s2">&quot;available&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">available</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">param</span><span class="p">[</span><span class="s2">&quot;need&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">need</span>

<span class="c1"># set solver and solve</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">option</span><span class="p">[</span><span class="s2">&quot;solver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;highs&quot;</span>
<span class="n">ampl</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>HiGHS 1.7.0:HiGHS 1.7.0: optimal solution; objective 2400
2 simplex iterations
0 barrier iterations
</pre></div>
</div>
</div>
</div>
</section>
<section id="reportando-los-resultados">
<h2>Reportando los resultados<a class="headerlink" href="#reportando-los-resultados" title="Permalink to this heading">#</a></h2>
<p>Resta recuperar la solución de AMPL, después de lo cual se pueden utilizar las amplias características y el ecosistema de Python para presentar los resultados de la manera deseada. Para este primer ejemplo, utilizamos una de las características más simples de Python, la declaración <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p>
<p>Una entidad de AMPL se referencia en el código Python a través de su nombre en el modelo de AMPL. Por ejemplo, la función objetivo <code class="docutils literal notranslate"><span class="pre">Profit</span></code> es <code class="docutils literal notranslate"><span class="pre">ampl.obj['Profit']</span></code>, y la colección de variables <code class="docutils literal notranslate"><span class="pre">Sell</span></code> es <code class="docutils literal notranslate"><span class="pre">ampl.var['Sell']</span></code>.</p>
<p>Para una entidad que no está indexada, el método <code class="docutils literal notranslate"><span class="pre">value()</span></code> devuelve el valor asociado. Así, la primera declaración <code class="docutils literal notranslate"><span class="pre">print</span></code> se refiere a <code class="docutils literal notranslate"><span class="pre">ampl.obj['Profit'].value()</span></code>.</p>
<p>Para una entidad indexada, usamos el método <code class="docutils literal notranslate"><span class="pre">to_dict()</span></code> para devolver los valores en un diccionario de Python, con los miembros del conjunto como claves. Luego, un bucle <code class="docutils literal notranslate"><span class="pre">for</span></code> puede usar el método <code class="docutils literal notranslate"><span class="pre">items()</span></code> para iterar sobre el diccionario y imprimir una línea para cada miembro.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a solution report</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Profit = </span><span class="si">{</span><span class="n">ampl</span><span class="o">.</span><span class="n">obj</span><span class="p">[</span><span class="s1">&#39;Profit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Production Report&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">product</span><span class="p">,</span> <span class="n">Sell</span> <span class="ow">in</span> <span class="n">ampl</span><span class="o">.</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;Sell&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">product</span><span class="si">}</span><span class="s2"> produced = </span><span class="si">{</span><span class="n">Sell</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Resource Report&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">resource</span><span class="p">,</span> <span class="n">Use</span> <span class="ow">in</span> <span class="n">ampl</span><span class="o">.</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;Use&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">resource</span><span class="si">}</span><span class="s2"> consumed = </span><span class="si">{</span><span class="n">Use</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Profit = 2400.0

Production Report
 U produced = 0
 V produced = 80

Resource Report
 A consumed = 80
 B consumed = 80
 M consumed = 720
</pre></div>
</div>
</div>
</div>
</section>
<section id="para-expertos-en-python-creacion-de-subclases-de-ampl">
<h2>Para expertos en Python: Creación de subclases de <code class="docutils literal notranslate"><span class="pre">AMPL</span></code><a class="headerlink" href="#para-expertos-en-python-creacion-de-subclases-de-ampl" title="Permalink to this heading">#</a></h2>
<p>Algunos lectores de estos cuadernos pueden ser desarrolladores de Python más experimentados que deseen aplicar AMPL en aplicaciones más especializadas y basadas en datos. La siguiente celda muestra cómo la clase AMPL puede ser extendida para crear clases de modelos especializadas. Aquí creamos una subclase llamada <code class="docutils literal notranslate"><span class="pre">ProductionModel</span></code> que acepta una representación particular de los datos del problema para producir un objeto de modelo de producción. El objeto del modelo de producción hereda todos los métodos asociados con cualquier modelo de AMPL, como <code class="docutils literal notranslate"><span class="pre">.display()</span></code> y <code class="docutils literal notranslate"><span class="pre">.solve()</span></code>, pero puede ser extendido con métodos adicionales.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%writefile</span> production_planning.mod

<span class="c1"># define sets</span>
<span class="nb">set</span> <span class="n">PRODUCTS</span><span class="p">;</span>
<span class="nb">set</span> <span class="n">RESOURCES</span><span class="p">;</span>

<span class="c1"># define parameters</span>
<span class="n">param</span> <span class="n">demand</span> <span class="p">{</span><span class="n">PRODUCTS</span><span class="p">}</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">param</span> <span class="n">price</span> <span class="p">{</span><span class="n">PRODUCTS</span><span class="p">}</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">param</span> <span class="n">available</span> <span class="p">{</span><span class="n">RESOURCES</span><span class="p">}</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">param</span> <span class="n">cost</span> <span class="p">{</span><span class="n">RESOURCES</span><span class="p">}</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">param</span> <span class="n">need</span> <span class="p">{</span><span class="n">RESOURCES</span><span class="p">,</span><span class="n">PRODUCTS</span><span class="p">}</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1"># define variables</span>
<span class="n">var</span> <span class="n">Use</span> <span class="p">{</span><span class="n">r</span> <span class="ow">in</span> <span class="n">RESOURCES</span><span class="p">}</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&lt;=</span> <span class="n">available</span><span class="p">[</span><span class="n">r</span><span class="p">];</span>
<span class="n">var</span> <span class="n">Sell</span> <span class="p">{</span><span class="n">p</span> <span class="ow">in</span> <span class="n">PRODUCTS</span><span class="p">}</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&lt;=</span> <span class="n">demand</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>

<span class="c1"># define objective function</span>
<span class="n">maximize</span> <span class="n">Profit</span><span class="p">:</span>
   <span class="nb">sum</span> <span class="p">{</span><span class="n">p</span> <span class="ow">in</span> <span class="n">PRODUCTS</span><span class="p">}</span> <span class="n">price</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">*</span> <span class="n">Sell</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">-</span>
   <span class="nb">sum</span> <span class="p">{</span><span class="n">r</span> <span class="ow">in</span> <span class="n">RESOURCES</span><span class="p">}</span> <span class="n">cost</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">*</span> <span class="n">Use</span><span class="p">[</span><span class="n">r</span><span class="p">];</span>

<span class="c1"># create indexed constraint</span>
<span class="n">subject</span> <span class="n">to</span> <span class="n">ResourceLimit</span> <span class="p">{</span><span class="n">r</span> <span class="ow">in</span> <span class="n">RESOURCES</span><span class="p">}:</span>
   <span class="nb">sum</span> <span class="p">{</span><span class="n">p</span> <span class="ow">in</span> <span class="n">PRODUCTS</span><span class="p">}</span> <span class="n">need</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="n">p</span><span class="p">]</span> <span class="o">*</span> <span class="n">Sell</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Use</span><span class="p">[</span><span class="n">r</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing production_planning.mod
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>


<span class="k">class</span> <span class="nc">ProductionModel</span><span class="p">(</span><span class="n">AMPL</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing a production model using AMPL.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">products</span><span class="p">,</span> <span class="n">resources</span><span class="p">,</span> <span class="n">processes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize ProductionModel as an AMPL instance.</span>

<span class="sd">        :param products: A dictionary containing product information.</span>
<span class="sd">        :param resources: A dictionary containing resource information.</span>
<span class="sd">        :param processes: A dictionary containing process information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ProductionModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># save data in the model instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">products</span> <span class="o">=</span> <span class="n">products</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources</span> <span class="o">=</span> <span class="n">resources</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processes</span> <span class="o">=</span> <span class="n">processes</span>

        <span class="c1"># flag to monitor solution status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solved</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare the data and pass the information to AMPL.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># convert the data dictionaries into pandas data frames</span>
        <span class="n">products</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">products</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
        <span class="n">processes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processes</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

        <span class="c1"># display the generated data frames</span>
        <span class="n">display</span><span class="p">(</span><span class="n">products</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">resources</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">processes</span><span class="p">)</span>

        <span class="c1"># pass data to AMPL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="s2">&quot;PRODUCTS&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">resources</span><span class="p">,</span> <span class="s2">&quot;RESOURCES&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">[</span><span class="s2">&quot;need&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">processes</span><span class="o">.</span><span class="n">T</span>

    <span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s2">&quot;highs&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the model, load the data, set the solver and solve the optimization problem.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;production_planning.mod&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option</span><span class="p">[</span><span class="s2">&quot;solver&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">solver</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ProductionModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solved</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Solve, if necessary, then report the model solution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">solved</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Profit = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">[</span><span class="s1">&#39;Profit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Production Report&quot;</span><span class="p">)</span>
        <span class="n">Sell</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;Sell&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
        <span class="n">Sell</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">Sell</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="s2">&quot;produced&quot;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">Sell</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;PRODUCTS&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Sell</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Resource Report&quot;</span><span class="p">)</span>
        <span class="n">Use</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="p">[</span><span class="s2">&quot;Use&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
        <span class="n">Use</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">Use</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="s2">&quot;consumed&quot;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">Use</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;RESOURCES&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Use</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">ProductionModel</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="n">resources</span><span class="p">,</span> <span class="n">processes</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">report</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>demand</th>
      <th>price</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>U</th>
      <td>40.0</td>
      <td>270.0</td>
    </tr>
    <tr>
      <th>V</th>
      <td>inf</td>
      <td>210.0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>available</th>
      <th>cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>M</th>
      <td>inf</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>A</th>
      <td>80.0</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>B</th>
      <td>100.0</td>
      <td>40.0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>M</th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>U</th>
      <td>10</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>V</th>
      <td>9</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>HiGHS 1.7.0:HiGHS 1.7.0: optimal solution; objective 2400
2 simplex iterations
0 barrier iterations
Profit = 2400.0

Production Report
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>produced</th>
    </tr>
    <tr>
      <th>PRODUCTS</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>U</th>
      <td>0</td>
    </tr>
    <tr>
      <th>V</th>
      <td>80</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resource Report
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>consumed</th>
    </tr>
    <tr>
      <th>RESOURCES</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>A</th>
      <td>80</td>
    </tr>
    <tr>
      <th>B</th>
      <td>80</td>
    </tr>
    <tr>
      <th>M</th>
      <td>720</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Class_2_Gurobi-AMPL\AMPL"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-representations">Data representations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modelo-matematico">Modelo matemático</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#el-modelo-de-produccion-en-ampl">El modelo de producción en AMPL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#los-datos-de-produccion-en-ampl">Los datos de producción en AMPL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resolviendo-el-problema-de-produccion">Resolviendo el problema de producción</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reportando-los-resultados">Reportando los resultados</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#para-expertos-en-python-creacion-de-subclases-de-ampl">Para expertos en Python: Creación de subclases de <code class="docutils literal notranslate"><span class="pre">AMPL</span></code></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alejandra Tabares
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>